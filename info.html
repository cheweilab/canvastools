<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ESL Testing Service</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.page {
  display: none;
  width: 100%;
  max-width: 420px;
}

.page.active {
  display: block;
}

.card {
  background: #ffffff;
  padding: 30px;
  border: 1px solid #ddd;
  border-radius: 8px;
}

h1, h2 {
  margin-top: 0;
}

form {
  display: flex;
  flex-direction: column;
}

label {
  font-size: 14px;
  margin-bottom: 5px;
}

input, select, textarea {
  margin-bottom: 15px;
  padding: 8px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button {
  padding: 10px;
  border: none;
  background: #222;
  color: white;
  cursor: pointer;
  border-radius: 4px;
}

button:hover {
  background: #444;
}

.loader {
  border: 4px solid #eee;
  border-top: 4px solid #222;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  margin: 20px auto;
}

@keyframes spin {
  100% { transform: rotate(360deg); }
}

.error {
  color: red;
  font-size: 13px;
}

.exam-question {
  margin-bottom: 20px;
}
</style>
</head>

<body>

<!-- PAGE 1: Email + Topic -->
<section id="page-request" class="page active">
  <div class="card">
    <h1>ESL Practice Exam</h1>
    <p>Enter your email and choose a topic to begin.</p>

    <form id="request-form">
      <label>Email</label>
      <input type="email" id="email" required />

      <label>Practice Topic</label>
      <select id="topic" required>
        <option value="">Select Topic</option>
        <option value="Speaking">Speaking</option>
        <option value="Writing">Writing</option>
        <option value="Reading">Reading</option>
        <option value="Listening">Listening</option>
      </select>

      <button type="submit">Request Exam</button>
    </form>
  </div>
</section>

<!-- PAGE 2: Processing -->
<section id="page-processing" class="page">
  <div class="card">
    <h2>Preparing Your Exam...</h2>
    <p>Please wait while we generate your test.</p>
    <div class="loader"></div>
    <p>You will receive a login code via email.</p>
  </div>
</section>

<!-- PAGE 3: Enter Code -->
<section id="page-login" class="page">
  <div class="card">
    <h2>Enter Login Code</h2>
    <p>Check your email and enter the 6-digit code below.</p>

    <form id="login-form">
      <input 
        type="text" 
        id="login-code" 
        maxlength="6" 
        placeholder="Enter 6-digit code"
        required 
      />
      <button type="submit">Start Exam</button>
    </form>

    <p class="error" id="code-error"></p>
  </div>
</section>

<!-- PAGE 4: Exam -->
<section id="page-exam" class="page">
  <div class="card">
    <h2>Practice Exam</h2>
    <p id="exam-topic"></p>

    <div class="exam-question">
      <p><strong>Question 1:</strong> Describe a memorable trip you have taken.</p>
      <textarea rows="6" placeholder="Write your response here..."></textarea>
    </div>

    <button onclick="submitExam()">Submit Answer</button>
  </div>
</section>

<script>
const requestForm = document.getElementById("request-form");
const loginForm = document.getElementById("login-form");

const pages = {
  request: document.getElementById("page-request"),
  processing: document.getElementById("page-processing"),
  login: document.getElementById("page-login"),
  exam: document.getElementById("page-exam")
};

let generatedCode = "";
let selectedTopic = "";

function showPage(page) {
  Object.values(pages).forEach(p => p.classList.remove("active"));
  page.classList.add("active");
}

// Step 1: Request Exam
requestForm.addEventListener("submit", function (e) {
  e.preventDefault();

  const email = document.getElementById("email").value;
  selectedTopic = document.getElementById("topic").value;

  if (!selectedTopic) return;

  // Simulated OTP generation
  generatedCode = Math.floor(100000 + Math.random() * 900000).toString();

  console.log("Simulated email sent to:", email);
  console.log("Login code:", generatedCode);

  showPage(pages.processing);

  // Simulated preparation delay (3 seconds)
  setTimeout(() => {
    showPage(pages.login);
  }, 3000);
});

// Step 2: Login with Code
loginForm.addEventListener("submit", function (e) {
  e.preventDefault();

  const enteredCode = document.getElementById("login-code").value;
  const error = document.getElementById("code-error");

  if (enteredCode === generatedCode) {
    document.getElementById("exam-topic").innerText =
      "Topic: " + selectedTopic;

    error.innerText = "";
    showPage(pages.exam);
  } else {
    error.innerText = "Invalid code. Please try again.";
  }
});

function submitExam() {
  alert("Exam submitted successfully (wireframe demo).");
}
</script>

</body>
</html>
